{"version":3,"sources":["assets/logo.png","utils/useLocalStorage.js","store.js","utils/LoginRequiredRoute.js","api.js","Constants.js","components/Comment.js","components/CommentList.js","components/Post.js","components/PostList.js","components/AppLayout.js","components/StoryList.js","components/Suggestion.js","components/SuggestionList.js","pages/Home.js","pages/About.js","utils/forms.js","pages/accounts/Login.js","pages/accounts/Profile.js","pages/accounts/Signup.js","pages/accounts/index.js","utils/base64.js","components/PostNewForm.js","pages/PostNew.js","pages/index.js","index.js"],"names":["module","exports","getStorageItem","key","initialValue","item","window","localStorage","getItem","JSON","parse","error","console","log","setStorageItem","value","setItem","stringify","AppContext","createContext","reducer","prevState","action","type","SET_TOKEN","jwtToken","payload","newState","isAuthenticated","UpdateWithSideEffect","state","dispatch","DELETE_TOKEN","useAppContext","useContext","setToken","token","LoginRequiredRoute","Component","component","kwargs","store","render","props","to","pathname","from","location","axiosInstance","Axios","create","baseURL","process","useAxios","makeUseAxios","axios","Comment","comment","author","username","name","avatar_url","message","created_at","displayName","length","avatar","src","alt","content","datetime","title","moment","format","fromNow","CommentList","post","useState","commentContent","setCommentComment","headers","Authorization","url","id","commentList","data","refetch","loading","handleCommentSave","a","apiUrl","group","response","groupEnd","map","TextArea","style","marginBottom","onChange","e","target","block","disabled","onClick","Post","handleLike","caption","photo","is_like","tag_set","className","hoverable","cover","actions","HeartTwoTone","twoToneColor","isLike","HeartOutlined","Meta","size","icon","description","PostList","postList","setPostList","originPostList","useEffect","method","prevList","currentPost","AppLayout","children","sidebar","LogoImage","Search","mode","Item","StoryList","Suggestion","suggestionUser","onFollowUser","is_follow","SuggestionList","userList","setUserList","origUserList","user","config","then","prevUserList","catch","Home","history","useHistory","push","About","parseErrorMessages","fieldsErrorMessages","Object","entries","reduce","acc","fieldName","errors","validateStatus","help","join","Login","useLocation","fieldErrors","setFieldErrors","loginRedirectUrl","layout","onFinish","values","password","notification","open","SmileOutlined","color","FrownOutlined","fn","autoComplete","label","rules","required","min","hasFeedback","non_field_errors","Password","tailLayout","htmlType","labelCol","span","wrapperCol","offset","Profile","Signup","Routes","match","exact","path","getBase64FromFile","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","PostNewForm","fileList","setFileList","visible","base64","previewPhoto","setPreviewPhoto","handlePreviewPhoto","preview","originFileObj","handleFinish","fieldValues","formData","FormData","append","forEach","status","listType","beforeUpload","onPreview","PlusOutlined","footer","onCancel","width","PostNew","Root","AccountsRoutes","ReactDOM","useReducerWithSideEffects","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.31bb35d7.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGcAAAAdCAMAAACAJoJsAAACwVBMVEUAAAAjHyAjHyD///8zIiIjHyBAQEAkICErICsmJiYsISEmIiKAgIAjHyAnISEtLS0kHyIpKSkkICEkHyEkHyE5OTkkICEjHyAzMzMuIyMkJCQjICElHyImISEjICErKyskJCQoKCgkICEkICEkICElICAmHyNAIEAkICEkISEnJyczMzMmJiYkICFVVVUkICAlISEjICAjHyEjHyElICAjHyEjHyEjICEkICEkICAkICIrIiIkHyAkHyEjICAkICAjHyElISEkISElICArKysmICArKysjICEkHyAkHyAkICIkISEnIyMkICElISEkHyAjICEuLi4kHyAjHyAlICUkISEnIyMkICAkJCQjHyAjHyEpIyMkHyEkICIkICEjICEjICAmIiIjICEkICIjICAkICAkISEkICAlHyIkICEwIDAoIiIjICIkHyIkISEkICQmISEkHyEkICElICIjICEkISEkICAkICAkICAjICAjISElHyEjISEkHyAkHyQjISEkISEmICYjICEkICAkISEkICAkHyApIiIjICEkICAkISElICMkJCQjHyEkICAjICEjHyEkHyEjHyEnIiIkICAjICEkHyAkHyEjICAkISEjHyAkICAkICInJyckHyEkICEkISEjICAjICEkHyEjHyEjICMkHyEmJiYjICAmISEkHyEkICAjIyMkICQlISEkICEjIyMnISEkISEkICAkICAkJCQlICIoIiIkJCQjICAjICAjICMkISEnJyckJCQlISEkICIjIyMkICEjICIpISEjICEkIiIjICAmIiImHyIkICAjIyMkHyEjISEkHyEkHyEkISEjICAmICMjICIkHyAlHyUlICAkHyAkJCQjHyMlHyElICIjICAkICEkICEkHyAlICAkHyAoICgkICAjICEmHyMlIiIkICEkICAkHyQjHyAYxkEZAAAA6nRSTlMA/fwBD/4E+hgUF0MC7i4Rchn5nPsJ+OYKFjLgWi/pBioTucDydlEIyUYaBRuoA3d9l7zDZ8xz2tBHgR7NlN+GikVObxJfDMr03XlNO6E+xdIL1b0wXUK/FfWDLKuAsNHnNcJw751rf1K4ECaYalxANrOqYdmFj8eWrl6SdO0xbZUokZ5Vz+Ql4daNYCO0t5nL23s0h9jsrJ9W9r5xIZPqZLXwpMRQmiKtPevOJDiE8R0nY36vK1ktB7amSIwNDnV4M7KJH+hb9zxKxjqjbOPzVKdYkN4pN9QcQYtoV+K65W7cII6gSVOxPzlNBvrEAAAEaklEQVR4XrXNU5OeiQJF4fV+atq2EXd3bNu2PbE5sTO2bds+tm2sX3HqfFW5m75IJf3c7dq7agP0+GFBQS+6Ulfw02e4GfKqQ99oBl34gc7hJugxy98/oEl0Yb/WcxP0dCmzNJkuvKcDuHHN+c5mnibyLcJ35adl67nq/TmJ3Jg6O6FGs/gWkZBxGvoNN6a/V6CvZlH1nTwgdeqXxM2eeBLyRmcV6MnK481QOTEziwhxRatuT2cGQGb768RB+Kklb8ca3gXY9hBEUj4Cyl4jboEL4UlNpJ93f0Ryu8HPw0BpoBkAp/UMwJiQru5t56vAHY9rcGe0vIl0HUfrLa8BLdvVPldD90I4cB0bTEunLOSfNgL82XUwTRPZosnhGnP1CKQ+ryVhgAJtBcpyrV2zS/0vxG7TDZfUTEbqgrs12AQ9dfqU8ToBWvTKL9XhHFNLAY65A76nyazV+X9w8DD9PlSpXwPwlY4GntXnqDqsxbBTH4bPdS0Ny9zVd7muIJLmzDwO6Dlo0M3D1N4Vadl6H8DomfdnsVeTOapJL2RXDtPZwDgLIgCU6wwozPdJoE0roY+5SfCo9oO++Uk8ZkID6+OxMOQpmKGbh0677JomT+hIAPKWjKBRixilAxzCrboJyNEJdwA8rzF4SV8GBupFUmttBEbo6yQGT8By22G4LgKGuhc+1sE+tdi2gwkDtIlrxul8VukTCYPI0VdhU+7CoWYfgB4/VmCr7gR66SAe0n8AKbqTnm6jUN+Hx3Q+sMuVsFFd3bLGy/2rV+hvueaqJpGp47fD+5oIS/eGmzuNjmSuBsBRXQ8M01bSdQ8wSccUlu+HRP0CajQGnLUGMtQdDPdcaEu6zuWads2gQy2FezSZEUExnMl2Op8HRlNhiP4MaNNBlGkOkKljDoWOwzO6DubFd+8GroTRaiYdavFF/S4UEjdYx/KJZo+FZ3VQQ+cQgDfNn9NYrRlUnNYOCJfoWyTrLGCx3l67Gxgb9UOYookwWQfDc2o992moJS/qASpKiOtvEKNO5xHfDzjxo42/aoY3DSVMHa4pTJwWuBRS1HqadHkqSffrgmUVABPsAzv0J3CvpsHT6me8o7+AoZ5n7l3EzfQsPKgDgYEaDVIWJaT16pmgL3NEGz9MKL5kqHTy2T6/9p6MlSW68K0HanX1iwCcNzT1pUdynV521N/pByMOq2focdpG2G35kep9xP3RDTBJ64EVgaEL1Aeq+W8AOeohjh9WayJvq6eqTqklk7WDuIxlGp30oBo9RJv6l/HaCunHxkDRX3X83wCIJbgeYr02FwGc/PtnQOWnJ/Z90gwQ3rrnn0DrkodHVsAtt9ZFKBzV+0LWdt1CHGNHHUz5fzUwHVoe7V3Kvw7eGSYOit44v4i4bY5L5TpF+oZCjuK69Pv3x1ynpP7B1jRX0c0iL7iWWufQzRabA4FNdK//WB4hWd+he+12D6T4eIzuVeenMMR9dLMXX5nwQWbubUl0t+L3Xnnk6arrOPgfG95WRPTKWcwAAAAASUVORK5CYII=\"","// https://usehooks.com/useLocalStorage/\n\nimport { useState } from \"react\";\n\nexport function getStorageItem(key, initialValue) {\n  try {\n    // Get from local storage by key\n    const item = window.localStorage.getItem(key);\n    // Parse stored json or if none return initialValue\n    return item ? JSON.parse(item) : initialValue;\n  } catch (error) {\n    // If error also return initialValue\n    console.log(error);\n    return initialValue;\n  }\n}\n\nexport function setStorageItem(key, value) {\n  try {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport default function useLocalStorage(key, initialValue) {\n  const [storedValue, setStoredValue] = useState(() => {\n    return getStorageItem(key, initialValue);\n  });\n\n  const setValue = value => {\n    const valueToStore = value instanceof Function ? value(storedValue) : value;\n    setStoredValue(valueToStore);\n    setStorageItem(key, valueToStore);\n  };\n\n  return [storedValue, setValue];\n}\n","import React, { createContext, useContext } from \"react\";\nimport useReducerWithSideEffects, {\n  UpdateWithSideEffect,\n  Update\n} from \"use-reducer-with-side-effects\";\nimport { getStorageItem, setStorageItem } from \"utils/useLocalStorage\";\n\nconst AppContext = createContext();\n\nconst reducer = (prevState, action) => {\n  const { type } = action;\n\n  if (type === SET_TOKEN) {\n    const { payload: jwtToken } = action;\n    const newState = { ...prevState, jwtToken, isAuthenticated: true };\n    return UpdateWithSideEffect(newState, (state, dispatch) => {\n      setStorageItem(\"jwtToken\", jwtToken);\n    });\n  } else if (type === DELETE_TOKEN) {\n    const newState = { ...prevState, jwtToken: \"\", isAuthenticated: false };\n    return UpdateWithSideEffect(newState, (state, dispatch) => {\n      setStorageItem(\"jwtToken\", \"\");\n    });\n  }\n\n  return prevState;\n};\n\nexport const AppProvider = ({ children }) => {\n  const jwtToken = getStorageItem(\"jwtToken\", \"\");\n  const [store, dispatch] = useReducerWithSideEffects(reducer, {\n    jwtToken,\n    isAuthenticated: jwtToken.length > 0\n  });\n  return (\n    <AppContext.Provider value={{ store, dispatch }}>\n      {children}\n    </AppContext.Provider>\n  );\n};\n\nexport const useAppContext = () => useContext(AppContext);\n\n// Actions\nconst SET_TOKEN = \"APP/SET_TOKEN\";\nconst DELETE_TOKEN = \"APP/DELETE_TOKEN\";\n\n// Action Creators\nexport const setToken = token => ({ type: SET_TOKEN, payload: token });\nexport const deleteToken = () => ({ type: DELETE_TOKEN });\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { useAppContext } from \"store\";\n\nexport default function LoginRequiredRoute({\n  component: Component,\n  ...kwargs\n}) {\n  const {\n    store: { isAuthenticated }\n  } = useAppContext();\n\n  if (isAuthenticated) {\n  } else {\n  }\n\n  return (\n    <Route\n      {...kwargs}\n      render={props => {\n        if (isAuthenticated) {\n          return <Component {...props} />;\n        } else {\n          return (\n            <Redirect\n              to={{\n                pathname: \"/accounts/login\",\n                state: { from: props.location }\n              }}\n            />\n          );\n        }\n      }}\n    />\n  );\n}\n","import Axios from \"axios\";\nimport { makeUseAxios } from \"axios-hooks\";\nimport { API_HOST } from \"Constants\";\n\nexport const axiosInstance = Axios.create({\n  baseURL: API_HOST\n});\n\nexport const useAxios = makeUseAxios({\n  axios: axiosInstance\n});\n","export const API_HOST =\n  process.env.REACT_APP_API_HOST || \"http://localhost:8000\";\n","import React from \"react\";\nimport { Avatar, Comment as AntdComment, Tooltip } from \"antd\";\nimport moment from \"moment\";\n\nexport default function Comment({ comment }) {\n  const {\n    author: { username, name, avatar_url },\n    message,\n    created_at\n  } = comment;\n  const displayName = name.length === 0 ? username : name;\n  return (\n    <AntdComment\n      author={displayName}\n      avatar={<Avatar src={avatar_url} alt={displayName} />}\n      content={<p>{message}</p>}\n      datetime={\n        <Tooltip title={moment().format(created_at)}>\n          <span>{moment(created_at).fromNow()}</span>\n        </Tooltip>\n      }\n    />\n  );\n}\n","import React, { useState } from \"react\";\nimport { Button, Input } from \"antd\";\nimport { axiosInstance, useAxios } from \"api\";\nimport { useAppContext } from \"store\";\nimport Comment from \"./Comment\";\n\nexport default function CommentList({ post }) {\n  const {\n    store: { jwtToken }\n  } = useAppContext();\n\n  const [commentContent, setCommentComment] = useState(\"\");\n\n  const headers = { Authorization: `JWT ${jwtToken}` };\n\n  const [{ data: commentList, loading, error }, refetch] = useAxios({\n    url: `/api/posts/${post.id}/comments/`,\n    headers\n  });\n\n  const handleCommentSave = async () => {\n    const apiUrl = `/api/posts/${post.id}/comments/`;\n\n    console.group(\"handleCommentSave\");\n    try {\n      const response = await axiosInstance.post(\n        apiUrl,\n        { message: commentContent },\n        { headers }\n      );\n      console.log(response);\n      setCommentComment(\"\");\n      refetch();\n    } catch (error) {\n      console.log(error);\n    }\n\n    console.groupEnd();\n  };\n\n  return (\n    <div>\n      {commentList &&\n        commentList.map(comment => (\n          <Comment key={comment.id} comment={comment} />\n        ))}\n\n      <Input.TextArea\n        style={{ marginBottom: \".5em\" }}\n        value={commentContent}\n        onChange={e => setCommentComment(e.target.value)}\n      />\n      <Button\n        block\n        type=\"primary\"\n        disabled={commentContent.length === 0}\n        onClick={handleCommentSave}\n      >\n        댓글 쓰기\n      </Button>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Avatar, Card, Comment, Tooltip } from \"antd\";\nimport { HeartOutlined, HeartTwoTone, UserOutlined } from \"@ant-design/icons\";\nimport \"./Post.scss\";\nimport { useAppContext } from \"store\";\nimport CommentList from \"./CommentList\";\n\nfunction Post({ post, handleLike }) {\n  const { author, caption, location, photo, tag_set, is_like } = post;\n  const { username, name, avatar_url } = author;\n\n  return (\n    <div className=\"post\">\n      <Card\n        hoverable\n        cover={<img src={photo} alt={caption} />}\n        actions={[\n          is_like ? (\n            <HeartTwoTone\n              twoToneColor=\"#eb2f96\"\n              onClick={() => handleLike({ post, isLike: false })}\n            />\n          ) : (\n            <HeartOutlined onClick={() => handleLike({ post, isLike: true })} />\n          )\n        ]}\n      >\n        <Card.Meta\n          avatar={\n            <Avatar\n              size=\"large\"\n              icon={<img src={avatar_url} alt={username} />}\n            />\n          }\n          title={location}\n          description={caption}\n          style={{ marginBottom: \"0.5em\" }}\n        />\n\n        <CommentList post={post} />\n      </Card>\n\n      {/* <img src={photo} alt={caption} style={{ width: \"100px\" }} />\n      {caption}, {location} */}\n    </div>\n  );\n}\n\nexport default Post;\n","import React, { useEffect, useState } from \"react\";\nimport { Alert } from \"antd\";\nimport { useAxios, axiosInstance } from \"api\";\nimport Post from \"./Post\";\nimport { useAppContext } from \"store\";\n\nfunction PostList() {\n  const {\n    store: { jwtToken }\n  } = useAppContext();\n\n  const [postList, setPostList] = useState([]);\n\n  const headers = { Authorization: `JWT ${jwtToken}` };\n\n  const [{ data: originPostList, loading, error }, refetch] = useAxios({\n    url: \"/api/posts/\",\n    headers\n  });\n\n  useEffect(() => {\n    setPostList(originPostList);\n  }, [originPostList]);\n\n  const handleLike = async ({ post, isLike }) => {\n    const apiUrl = `/api/posts/${post.id}/like/`;\n    const method = isLike ? \"POST\" : \"DELETE\";\n\n    try {\n      const response = await axiosInstance({\n        url: apiUrl,\n        method,\n        headers\n      });\n      console.log(\"response :\", response);\n\n      setPostList(prevList => {\n        return prevList.map(currentPost =>\n          currentPost === post\n            ? { ...currentPost, is_like: isLike }\n            : currentPost\n        );\n      });\n    } catch (error) {\n      console.log(\"error :\", error);\n    }\n  };\n\n  return (\n    <div>\n      {postList && postList.length === 0 && (\n        <Alert type=\"warning\" message=\"포스팅이 없습니다. :-(\" />\n      )}\n      {postList &&\n        postList.map(post => (\n          <Post post={post} key={post.id} handleLike={handleLike} />\n        ))}\n    </div>\n  );\n}\n\nexport default PostList;\n","import React from \"react\";\nimport { Input, Menu } from \"antd\";\nimport \"./AppLayout.scss\";\nimport LogoImage from \"assets/logo.png\";\n\nfunction AppLayout({ children, sidebar }) {\n  return (\n    <div className=\"app\">\n      <div className=\"header\">\n        <h1 className=\"page-title\">\n          <img src={LogoImage} alt=\"logo\" />\n        </h1>\n        <div className=\"search\">\n          <Input.Search />\n        </div>\n        <div className=\"topnav\">\n          <Menu mode=\"horizontal\">\n            <Menu.Item>메뉴1</Menu.Item>\n            <Menu.Item>메뉴2</Menu.Item>\n            <Menu.Item>메뉴3</Menu.Item>\n          </Menu>\n        </div>\n      </div>\n      <div className=\"contents\">{children}</div>\n      <div className=\"sidebar\">{sidebar}</div>\n      <div className=\"footer\">&copy; 2020. Ask Company.</div>\n    </div>\n  );\n}\n\nexport default AppLayout;\n","import React from \"react\";\nimport { Card } from \"antd\";\nimport \"./StoryList.scss\";\n\nexport default function StoryList({ style }) {\n  return (\n    <div style={style}>\n      <Card title=\"Stories\" size=\"small\">\n        Stories from people you follow will show up here.\n      </Card>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Avatar, Button } from \"antd\";\nimport \"./Suggestion.scss\";\n\nexport default function Suggestion({ suggestionUser, onFollowUser }) {\n  const { username, name, avatar_url, is_follow } = suggestionUser;\n  return (\n    <div className=\"suggestion\">\n      <div className=\"avatar\">\n        <Avatar\n          size=\"small\"\n          icon={<img src={avatar_url} alt={`${username}'s avatar`} />}\n        />\n      </div>\n      <div className=\"username\">{name.length === 0 ? username : name}</div>\n      <div className=\"action\">\n        {is_follow && \"팔로잉 중\"}\n        {!is_follow && (\n          <Button size=\"small\" onClick={() => onFollowUser(username)}>\n            Follow\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useMemo, useState, useEffect } from \"react\";\nimport { Card } from \"antd\";\nimport Suggestion from \"./Suggestion\";\nimport { useAxios, axiosInstance } from \"api\";\nimport { useAppContext } from \"store\";\nimport \"./SuggestionList.scss\";\n\nexport default function SuggestionList({ style }) {\n  const {\n    store: { jwtToken }\n  } = useAppContext();\n\n  const [userList, setUserList] = useState([]);\n\n  const headers = { Authorization: `JWT ${jwtToken}` };\n\n  const [{ data: origUserList, loading, error }, refetch] = useAxios({\n    url: \"/accounts/suggestions/\",\n    headers\n  });\n\n  useEffect(() => {\n    if (!origUserList) setUserList([]);\n    else setUserList(origUserList.map(user => ({ ...user, is_follow: false })));\n  }, [origUserList]);\n\n  const onFollowUser = username => {\n    const data = { username };\n    const config = { headers };\n    axiosInstance\n      .post(\"/accounts/follow/\", data, config)\n      .then(response => {\n        setUserList(prevUserList =>\n          prevUserList.map(user =>\n            user.username !== username ? user : { ...user, is_follow: true }\n          )\n        );\n      })\n      .catch(error => {\n        console.error(error);\n      });\n  };\n\n  return (\n    <div style={style}>\n      {loading && <div>Loading ...</div>}\n      {error && <div>로딩 중에 에러가 발생했습니다.</div>}\n\n      <Card title=\"Suggestions for you \" size=\"small\">\n        {userList.map(suggestionUser => (\n          <Suggestion\n            key={suggestionUser.username}\n            suggestionUser={suggestionUser}\n            onFollowUser={onFollowUser}\n          />\n        ))}\n      </Card>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport { useHistory } from \"react-router-dom\";\nimport PostList from \"components/PostList\";\nimport AppLayout from \"components/AppLayout\";\nimport StoryList from \"components/StoryList\";\nimport SuggestionList from \"components/SuggestionList\";\n\nfunction Home() {\n  const history = useHistory();\n  const handleClick = () => {\n    history.push(\"/posts/new\");\n  };\n\n  const sidebar = (\n    <>\n      <Button\n        type=\"primary\"\n        block\n        style={{ marginBottom: \"1rem\" }}\n        onClick={handleClick}\n      >\n        새 포스팅 쓰기\n      </Button>\n      <StoryList style={{ marginBottom: \"1rem\" }} />\n      <SuggestionList />\n    </>\n  );\n\n  return (\n    <AppLayout sidebar={sidebar}>\n      <PostList />\n    </AppLayout>\n  );\n}\n\nexport default Home;\n","import React from \"react\";\n\nfunction About() {\n  return <div>About</div>;\n}\n\nexport default About;\n","export function parseErrorMessages(fieldsErrorMessages) {\n  return Object.entries(fieldsErrorMessages).reduce(\n    (acc, [fieldName, errors]) => {\n      // errors : [\"m1\", \"m2\"].join(\" \") => \"m1 \"m2\"\n      acc[fieldName] = {\n        validateStatus: \"error\",\n        help: errors.join(\" \")\n      };\n      return acc;\n    },\n    {}\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Card, Form, Input, Button, notification } from \"antd\";\nimport { SmileOutlined, FrownOutlined } from \"@ant-design/icons\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { useAppContext } from \"store\";\nimport { setToken } from \"store\";\nimport { parseErrorMessages } from \"utils/forms\";\nimport { axiosInstance } from \"api\";\n\nexport default function Login() {\n  const { dispatch } = useAppContext();\n  const location = useLocation();\n  const history = useHistory();\n  const [fieldErrors, setFieldErrors] = useState({});\n\n  const { from: loginRedirectUrl } = location.state || {\n    from: { pathname: \"/\" }\n  };\n\n  const onFinish = values => {\n    async function fn() {\n      const { username, password } = values;\n\n      setFieldErrors({});\n\n      const data = { username, password };\n      try {\n        const response = await axiosInstance.post(\"/accounts/token/\", data);\n        const {\n          data: { token: jwtToken }\n        } = response;\n\n        dispatch(setToken(jwtToken));\n\n        notification.open({\n          message: \"로그인 성공\",\n          icon: <SmileOutlined style={{ color: \"#108ee9\" }} />\n        });\n\n        history.push(loginRedirectUrl);\n      } catch (error) {\n        if (error.response) {\n          notification.open({\n            message: \"로그인 실패\",\n            description: \"아이디/암호를 확인해주세요.\",\n            icon: <FrownOutlined style={{ color: \"#ff3333\" }} />\n          });\n\n          const { data: fieldsErrorMessages } = error.response;\n          // fieldsErrorMessages => { username: \"m1 m2\", password: [] }\n          // python: mydict.items()\n          setFieldErrors(parseErrorMessages(fieldsErrorMessages));\n        }\n      }\n    }\n    fn();\n  };\n\n  return (\n    <Card title=\"로그인\">\n      <Form\n        {...layout}\n        onFinish={onFinish}\n        //   onFinishFailed={onFinishFailed}\n        autoComplete={\"false\"}\n      >\n        <Form.Item\n          label=\"Username\"\n          name=\"username\"\n          rules={[\n            { required: true, message: \"Please input your username!\" },\n            { min: 5, message: \"5글자 입력해주세요.\" }\n          ]}\n          hasFeedback\n          {...fieldErrors.username}\n          {...fieldErrors.non_field_errors}\n        >\n          <Input />\n        </Form.Item>\n\n        <Form.Item\n          label=\"Password\"\n          name=\"password\"\n          rules={[{ required: true, message: \"Please input your password!\" }]}\n          {...fieldErrors.password}\n        >\n          <Input.Password />\n        </Form.Item>\n\n        <Form.Item {...tailLayout}>\n          <Button type=\"primary\" htmlType=\"submit\">\n            Submit\n          </Button>\n        </Form.Item>\n      </Form>\n    </Card>\n  );\n}\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 }\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 }\n};\n","import React from \"react\";\n\nfunction Profile() {\n  return <div>accounts/profile</div>;\n}\n\nexport default Profile;\n","import React, { useState, useEffect } from \"react\";\nimport { Form, Input, Button, notification } from \"antd\";\nimport { SmileOutlined, FrownOutlined } from \"@ant-design/icons\";\nimport { useHistory } from \"react-router-dom\";\nimport { axiosInstance } from \"api\";\n\nexport default function Signup() {\n  const history = useHistory();\n  const [fieldErrors, setFieldErrors] = useState({});\n\n  const onFinish = values => {\n    async function fn() {\n      const { username, password } = values;\n\n      setFieldErrors({});\n\n      const data = { username, password };\n      try {\n        await axiosInstance.post(\"/accounts/signup/\", data);\n\n        notification.open({\n          message: \"회원가입 성공\",\n          description: \"로그인 페이지로 이동합니다.\",\n          icon: <SmileOutlined style={{ color: \"#108ee9\" }} />\n        });\n\n        history.push(\"/accounts/login\");\n      } catch (error) {\n        if (error.response) {\n          notification.open({\n            message: \"회원가입 실패\",\n            description: \"아이디/암호를 확인해주세요.\",\n            icon: <FrownOutlined style={{ color: \"#ff3333\" }} />\n          });\n\n          const { data: fieldsErrorMessages } = error.response;\n          // fieldsErrorMessages => { username: \"m1 m2\", password: [] }\n          // python: mydict.items()\n          setFieldErrors(\n            Object.entries(fieldsErrorMessages).reduce(\n              (acc, [fieldName, errors]) => {\n                // errors : [\"m1\", \"m2\"].join(\" \") => \"m1 \"m2\"\n                acc[fieldName] = {\n                  validateStatus: \"error\",\n                  help: errors.join(\" \")\n                };\n                return acc;\n              },\n              {}\n            )\n          );\n        }\n      }\n    }\n    fn();\n  };\n\n  return (\n    <Form\n      {...layout}\n      onFinish={onFinish}\n      //   onFinishFailed={onFinishFailed}\n      autoComplete={\"false\"}\n    >\n      <Form.Item\n        label=\"Username\"\n        name=\"username\"\n        rules={[\n          { required: true, message: \"Please input your username!\" },\n          { min: 5, message: \"5글자 입력해주세요.\" }\n        ]}\n        hasFeedback\n        {...fieldErrors.username}\n      >\n        <Input />\n      </Form.Item>\n\n      <Form.Item\n        label=\"Password\"\n        name=\"password\"\n        rules={[{ required: true, message: \"Please input your password!\" }]}\n        {...fieldErrors.password}\n      >\n        <Input.Password />\n      </Form.Item>\n\n      <Form.Item {...tailLayout}>\n        <Button type=\"primary\" htmlType=\"submit\">\n          Submit\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n}\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 }\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 }\n};\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport Login from \"./Login\";\nimport Profile from \"./Profile\";\nimport Signup from \"./Signup\";\nimport LoginRequiredRoute from \"utils/LoginRequiredRoute\";\n\nfunction Routes({ match }) {\n  return (\n    <>\n      <LoginRequiredRoute\n        exact\n        path={match.url + \"/profile\"}\n        component={Profile}\n      />\n      <Route exact path={match.url + \"/login\"} component={Login} />\n      <Route exact path={match.url + \"/signup\"} component={Signup} />\n    </>\n  );\n}\n\nexport default Routes;\n","export function getBase64FromFile(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n  });\n}\n","import React, { useState } from \"react\";\nimport { Button, Form, Input, Modal, Upload, notification } from \"antd\";\nimport { FrownOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { getBase64FromFile } from \"utils/base64\";\nimport { useAppContext } from \"store\";\nimport { parseErrorMessages } from \"utils/forms\";\nimport { useHistory } from \"react-router-dom\";\nimport { axiosInstance } from \"api\";\n\nexport default function PostNewForm() {\n  const {\n    store: { jwtToken }\n  } = useAppContext();\n\n  const history = useHistory();\n\n  const [fileList, setFileList] = useState([]);\n  const [previewPhoto, setPreviewPhoto] = useState({\n    visible: false,\n    base64: null\n  });\n  const [fieldErrors, setFieldErrors] = useState({});\n\n  const handleUploadChange = ({ fileList }) => {\n    setFileList(fileList);\n  };\n\n  const handlePreviewPhoto = async file => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64FromFile(file.originFileObj);\n    }\n\n    setPreviewPhoto({\n      visible: true,\n      base64: file.url || file.preview\n    });\n  };\n\n  const handleFinish = async fieldValues => {\n    const {\n      caption,\n      location,\n      photo: { fileList }\n    } = fieldValues;\n\n    const formData = new FormData();\n    formData.append(\"caption\", caption);\n    formData.append(\"location\", location);\n    fileList.forEach(file => {\n      formData.append(\"photo\", file.originFileObj);\n    });\n\n    const headers = { Authorization: `JWT ${jwtToken}` };\n    try {\n      const response = await axiosInstance.post(\"/api/posts/\", formData, {\n        headers\n      });\n      console.log(\"success response :\", response);\n      history.push(\"/\");\n    } catch (error) {\n      if (error.response) {\n        const { status, data: fieldsErrorMessages } = error.response;\n        if (typeof fieldsErrorMessages === \"string\") {\n          notification.open({\n            message: \"서버 오류\",\n            description: `에러) ${status} 응답을 받았습니다. 서버 에러를 확인해주세요.`,\n            icon: <FrownOutlined style={{ color: \"#ff3333\" }} />\n          });\n        } else {\n          setFieldErrors(parseErrorMessages(fieldsErrorMessages));\n        }\n      }\n    }\n  };\n\n  return (\n    <Form {...layout} onFinish={handleFinish} autoComplete={\"false\"}>\n      <Form.Item\n        label=\"Caption\"\n        name=\"caption\"\n        rules={[{ required: true, message: \"Caption을 입력해주세요.\" }]}\n        hasFeedback\n        {...fieldErrors.caption}\n        {...fieldErrors.non_field_errors}\n      >\n        <Input.TextArea />\n      </Form.Item>\n\n      <Form.Item\n        label=\"Location\"\n        name=\"location\"\n        rules={[{ required: true, message: \"Location을 입력해주세요.\" }]}\n        hasFeedback\n        {...fieldErrors.location}\n      >\n        <Input />\n      </Form.Item>\n\n      <Form.Item\n        label=\"Photo\"\n        name=\"photo\"\n        rules={[{ required: true, message: \"사진을 입력해주세요.\" }]}\n        hasFeedback\n        {...fieldErrors.photo}\n      >\n        <Upload\n          listType=\"picture-card\"\n          fileList={fileList}\n          beforeUpload={() => {\n            return false;\n          }}\n          onChange={handleUploadChange}\n          onPreview={handlePreviewPhoto}\n        >\n          {fileList.length > 0 ? null : (\n            <div>\n              <PlusOutlined />\n              <div className=\"ant-upload-text\">Upload</div>\n            </div>\n          )}\n        </Upload>\n      </Form.Item>\n\n      <Form.Item {...tailLayout}>\n        <Button type=\"primary\" htmlType=\"submit\">\n          Submit\n        </Button>\n      </Form.Item>\n\n      <Modal\n        visible={previewPhoto.visible}\n        footer={null}\n        onCancel={() => setPreviewPhoto({ visible: false })}\n      >\n        <img\n          src={previewPhoto.base64}\n          style={{ width: \"100%\" }}\n          alt=\"Preview\"\n        />\n      </Modal>\n\n      <hr />\n      {JSON.stringify(fileList)}\n    </Form>\n  );\n}\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 }\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 }\n};\n","import React from \"react\";\nimport { Card } from \"antd\";\nimport PostNewForm from \"components/PostNewForm\";\nimport \"./PostNew.scss\";\n\nexport default function PostNew() {\n  return (\n    <div className=\"PostNew\">\n      <Card title=\"새 포스팅 쓰기\">\n        <PostNewForm />\n      </Card>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport LoginRequiredRoute from \"utils/LoginRequiredRoute\";\nimport Home from \"./Home\";\nimport About from \"./About\";\nimport AccountsRoutes from \"./accounts\";\nimport PostNew from \"./PostNew\";\n\nfunction Root() {\n  return (\n    <>\n      <LoginRequiredRoute exact path=\"/\" component={Home} />\n      <Route exact path=\"/about\" component={About} />\n      <LoginRequiredRoute exact path=\"/posts/new\" component={PostNew} />\n      <Route path=\"/accounts\" component={AccountsRoutes} />\n    </>\n  );\n}\n\nexport default Root;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { AppProvider } from \"store\";\nimport Root from \"pages\";\nimport \"antd/dist/antd.css\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <AppProvider>\n      <Root />\n    </AppProvider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}